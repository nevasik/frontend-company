{"ast":null,"code":"var _jsxFileName = \"/Users/dimapoplaukhin/Downloads/compaign-front-final/src/pages/auth/Login.js\",\n  _s = $RefreshSig$();\nimport Form from 'react-bootstrap/Form';\nimport { useContext, useState } from \"react\";\nimport LoadingButton from \"../../components/LoadingButton\";\nimport CommonContainer from '../../components/CommonContainer';\nimport { login } from '../../api/auth';\nimport Error from '../../components/Error';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { UserContext } from '../../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [auth, setAuth] = useState({\n    login: \"\",\n    password: \"\"\n  });\n  const [loading] = useState(false);\n  const [error, setError] = useState(null);\n  const userInfo = useContext(UserContext);\n  const navigate = useNavigate();\n  const onSave = async event => {\n    event.preventDefault();\n    try {\n      await login(auth);\n      localStorage.setItem('user', auth);\n      userInfo.setUser({\n        ...userInfo,\n        user: auth\n      });\n      navigate('/people');\n    } catch (e) {\n      if (e.request.status == 401) {\n        setError({\n          title: \"Ошибки аутентификации\",\n          message: \"Неправильные логин или пароль\"\n        });\n      } else {\n        setError({\n          title: \"Ошибка аутентификации\",\n          message: \"Неизвестная ошибка\"\n        });\n      }\n      setAuth({\n        ...auth,\n        password: \"\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CommonContainer, {\n    title: \"\\u0410\\u0443\\u0442\\u0435\\u043D\\u0442\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\",\n    children: [error && /*#__PURE__*/_jsxDEV(Error, {\n      title: error.title,\n      onClose: () => setError(null),\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"exampleForm.ControlInput1\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          value: auth.login,\n          onChange: event => setAuth({\n            ...auth,\n            login: event.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"exampleForm.ControlInput2\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          value: auth.password,\n          onChange: event => setAuth({\n            ...auth,\n            password: event.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n        onClick: onSave,\n        text: \"\\u0412\\u043E\\u0439\\u0442\\u0438\",\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"mx-5\",\n        to: \"/signUp\",\n        children: \"\\u041D\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"fkIYF2OO3Q0UqwMNI33D0CmGGD4=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Form","useContext","useState","LoadingButton","CommonContainer","login","Error","Link","useNavigate","UserContext","jsxDEV","_jsxDEV","Login","_s","auth","setAuth","password","loading","error","setError","userInfo","navigate","onSave","event","preventDefault","localStorage","setItem","setUser","user","e","request","status","title","message","children","onClose","fileName","_jsxFileName","lineNumber","columnNumber","Group","className","controlId","Label","Control","value","onChange","target","type","onClick","text","to","_c","$RefreshReg$"],"sources":["/Users/dimapoplaukhin/Downloads/compaign-front-final/src/pages/auth/Login.js"],"sourcesContent":["import Form from 'react-bootstrap/Form';\r\nimport {useContext, useState} from \"react\";\r\nimport LoadingButton from \"../../components/LoadingButton\";\r\nimport CommonContainer from '../../components/CommonContainer';\r\nimport { login } from '../../api/auth';\r\nimport Error from '../../components/Error';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { UserContext } from '../../App';\r\n\r\nfunction Login() {\r\n    const [auth, setAuth] = useState({login: \"\", password: \"\"})\r\n    const [loading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n    const userInfo = useContext(UserContext)\r\n    const navigate = useNavigate()\r\n\r\n    const onSave = async (event) => {\r\n        event.preventDefault()\r\n        try {\r\n           await login(auth)\r\n           localStorage.setItem('user', auth)\r\n           userInfo.setUser({...userInfo, user: auth})\r\n           navigate('/people')\r\n        }\r\n        catch(e) {\r\n            if (e.request.status == 401) {\r\n               setError({title: \"Ошибки аутентификации\", message: \"Неправильные логин или пароль\"})\r\n            }else {\r\n               setError({title: \"Ошибка аутентификации\", message: \"Неизвестная ошибка\"})\r\n            }\r\n            setAuth({...auth, password: \"\"})\r\n        }\r\n    }\r\n\r\n    return (\r\n        <CommonContainer title=\"Аутентификация\">\r\n            {error && <Error title={error.title} onClose={() => setError(null)}>{error.message}</Error> }\r\n        <Form>\r\n               <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput1\">\r\n                    <Form.Label>Имя пользователя</Form.Label>\r\n                    <Form.Control value={auth.login} onChange={event => setAuth({...auth, login: event.target.value})}/>\r\n               </Form.Group>\r\n               <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\r\n                    <Form.Label>Пароль</Form.Label>\r\n                    <Form.Control type=\"password\" value={auth.password} onChange={event => setAuth({...auth, password: event.target.value})}/>\r\n               </Form.Group>\r\n            <LoadingButton onClick={onSave} text=\"Войти\" loading={loading}/> \r\n            <Link className=\"mx-5\" to=\"/signUp\">Не зарегистрированы?</Link>\r\n        </Form> \r\n        </CommonContainer> \r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}